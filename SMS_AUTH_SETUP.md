# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMS-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ SvetSalonPro

## üì± –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ SMS-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä, –ø–æ–ª—É—á–∞–µ—Ç SMS-–∫–æ–¥, –≤–≤–æ–¥–∏—Ç –µ–≥–æ –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Supabase Auth** - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–æ–≤
- **Twilio** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä SMS (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Supabase)
- **JavaScript** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º –∏ UI

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Supabase

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ SMS-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

1. **–í–æ–π–¥–∏—Ç–µ –≤ Supabase Dashboard**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Authentication ‚Üí Settings**
3. **–í–∫–ª—é—á–∏—Ç–µ "Enable phone confirmations"**
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Twilio)**

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Twilio

1. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ Twilio** (https://www.twilio.com)
2. **–ü–æ–ª—É—á–∏—Ç–µ Account SID –∏ Auth Token**
3. **–ö—É–ø–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS**
4. **–í Supabase Dashboard ‚Üí Authentication ‚Üí Settings ‚Üí SMS Provider:**
   - –í—ã–±–µ—Ä–∏—Ç–µ "Twilio"
   - –í–≤–µ–¥–∏—Ç–µ Account SID
   - –í–≤–µ–¥–∏—Ç–µ Auth Token
   - –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–∞ SMS

–í Supabase Dashboard ‚Üí Authentication ‚Üí Settings ‚Üí SMS Template:

```text
–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è SvetSalonPro: {{ .Code }}

–ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 10 –º–∏–Ω—É—Ç.
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
- –ö–Ω–æ–ø–∫–∏ "–¢–µ–ª–µ—Ñ–æ–Ω" –∏ "Email"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞–º–∏
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞

### 2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `+7`
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≤–∏–¥–µ `+7 (XXX) XXX-XX-XX`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã –Ω–æ–º–µ—Ä–∞

### 3. **–û—Ç–ø—Ä–∞–≤–∫–∞ SMS**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ OTP —á–µ—Ä–µ–∑ Supabase
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

### 4. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞
- 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (60 —Å–µ–∫—É–Ω–¥)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 5. **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ"
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏

## üìã –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```html
<!-- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ -->
<div class="flex bg-gray-100 rounded-lg p-1 mb-4">
    <button id="phoneAuthBtn" class="flex-1 py-2 px-4 rounded-md bg-pink-600 text-white">
        <i class="fas fa-mobile-alt mr-2"></i>–¢–µ–ª–µ—Ñ–æ–Ω
    </button>
    <button id="emailAuthBtn" class="flex-1 py-2 px-4 rounded-md text-gray-600">
        <i class="fas fa-envelope mr-2"></i>Email
    </button>
</div>

<!-- –§–æ—Ä–º–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
<div id="phoneAuthSection">
    <input type="tel" id="phone" placeholder="+7 (___) ___-__-__">
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥</button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
<div id="smsVerificationModal" class="hidden">
    <input type="text" id="smsCode" placeholder="000000" maxlength="6">
    <button id="verifyCodeBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    <button id="resendCodeBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ</button>
</div>
```

### JavaScript —Ñ—É–Ω–∫—Ü–∏–∏:

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
async function handlePhoneAuth(phone) {
    const formattedPhone = formatPhoneForAuth(phone);
    const { error } = await client.auth.signInWithOtp({
        phone: formattedPhone,
        options: { shouldCreateUser: true }
    });
    
    if (!error) {
        showSMSVerificationModal(formattedPhone);
    }
}

// –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è SMS
async function handleSMSVerification() {
    const { data, error } = await client.auth.verifyOtp({
        phone: phone,
        token: code,
        type: 'sms'
    });
    
    if (!error) {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        closeSMSVerificationModal();
    }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–æ–º–µ—Ä–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã (10 —Ü–∏—Ñ—Ä –¥–ª—è –†–æ—Å—Å–∏–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- –¢–∞–π–º–µ—Ä –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É (60 —Å–µ–∫—É–Ω–¥)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### Twilio —Ç–∞—Ä–∏—Ñ—ã (–ø—Ä–∏–º–µ—Ä–Ω–æ):
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:** ~$1/–º–µ—Å—è—Ü
- **SMS –≤ –†–æ—Å—Å–∏–∏:** ~$0.05 –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **SMS –≤ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö:** ~$0.02-0.10 –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SMS –≤ –¥–µ–Ω—å
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Twilio Dashboard
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ SMS
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–æ–¥–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—à–∏–±–∫–∞–º–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **SMS –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Twilio
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

2. **–ö–æ–¥ –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –Ω–µ –∏—Å—Ç–µ–∫
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `shouldCreateUser`
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```javascript
console.log('Phone auth error:', error);
console.log('SMS verification error:', error);
console.log('Resend code error:', error);
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Supabase
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Twilio
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Supabase Auth
