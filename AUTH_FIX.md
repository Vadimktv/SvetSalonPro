# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Magic Link

## üîß **–ü—Ä–æ–±–ª–µ–º–∞**
–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç, –Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–∞ –∏–∑ URL**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `handleAuthFromURL()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç URL –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ö—ç—à–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ç–æ–∫–µ–Ω–æ–≤: recovery, signup, magiclink

### **2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Magic Link**
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π `emailRedirectTo` URL
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `shouldCreateUser: true`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤

### **3. –£–ª—É—á—à–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏**
- ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Å—Å–∏–∏ —Å access_token –∏ refresh_token
- ‚úÖ Fallback –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ç–æ–ª—å–∫–æ —Å access_token
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ URL –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### **4. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

## üîÑ **–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

### **1. –û—Ç–ø—Ä–∞–≤–∫–∞ Magic Link**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Magic Link —Å —Ç–æ–∫–µ–Ω–∞–º–∏
3. URL —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `access_token`, `refresh_token`, `type`

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞**
1. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è URL
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω —Ç–æ–∫–µ–Ω, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–µ—Å—Å–∏—è
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É
4. URL –æ—á–∏—â–∞–µ—Ç—Å—è –æ—Ç —Ç–æ–∫–µ–Ω–æ–≤

### **3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—Ö–æ–¥–µ

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
```javascript
const urlParams = new URLSearchParams(window.location.search);
const hashParams = new URLSearchParams(window.location.hash.substring(1));

const accessToken = urlParams.get('access_token') || hashParams.get('access_token');
const refreshToken = urlParams.get('refresh_token') || hashParams.get('refresh_token');
const type = urlParams.get('type') || hashParams.get('type');
```

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏**
```javascript
const { data, error } = await client.auth.setSession({
    access_token: accessToken,
    refresh_token: refreshToken || null
});
```

### **–û—á–∏—Å—Ç–∫–∞ URL**
```javascript
const cleanURL = window.location.pathname;
window.history.replaceState({}, document.title, cleanURL);
```

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ Magic Link
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

## üìù **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
1. –í–≤–µ–¥–∏—Ç–µ email –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ email
3. –î–æ–ª–∂–µ–Ω –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
4. URL –¥–æ–ª–∂–µ–Ω –æ—á–∏—Å—Ç–∏—Ç—å—Å—è –æ—Ç —Ç–æ–∫–µ–Ω–æ–≤
